<div *ngIf="isMessagePopup">
  <h2 mat-dialog-title>Confirmation</h2>
  <mat-dialog-content>
    <p>{{ data.message }}</p>
  </mat-dialog-content>
  <mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Cancel</button>
    <button mat-raised-button color="warn" (click)="onConfirm()">Delete</button>
  </mat-dialog-actions>
</div>

<div *ngIf="data.popupType === 'college'">
  <h3 mat-dialog-title>{{ data.college ? 'Edit College' : 'Add College' }}</h3>
  <hr>

  <div mat-dialog-content>
    <form #collegeForm="ngForm" class="card shadow-lg bg-white p-3">
      <!-- College Logo Upload -->
      <div class="form-group">
        <div *ngIf="logoImageBase64" class="mt-2 text-center">
          <img [src]="logoImageBase64" alt="College Logo" style="max-width: 100px; max-height: 100px;" />
          <br />
          <button mat-button color="warn" class="mt-2" (click)="clearImage()">Remove Image</button>
        </div>
        <div class="row mt-2">
          <div class="col-md-4">
            <label for="collegeLogo">Upload Logo</label>
          </div>
          <div class="col-md-8">
            <input type="file" id="collegeLogo" (change)="onImageUpload($event)" />
          </div>
        </div>
      </div>

      <div class="row">
        <!-- College Name -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>College Name</mat-label>
            <input matInput type="text" name="collegeName" [(ngModel)]="college.collegeName" required />
          </mat-form-field>
        </div>

        <!-- Pincode -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Pincode</mat-label>
            <input matInput type="text" name="pincode" [(ngModel)]="college.pincode" required />
          </mat-form-field>
        </div>

        <!-- Address -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Address</mat-label>
            <textarea matInput name="address" [(ngModel)]="college.address" required></textarea>
          </mat-form-field>
        </div>

        <!-- Mobile Number -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Mobile Number</mat-label>
            <input matInput type="text" name="mobileNumber" [(ngModel)]="college.mobileNumber" required />
          </mat-form-field>
        </div>

        <!-- Email -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Email</mat-label>
            <input matInput type="email" name="email" [(ngModel)]="college.email" required />
          </mat-form-field>
        </div>

      

        <!-- Principal Name -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Principal Name</mat-label>
            <input matInput type="text" name="principalName" [(ngModel)]="college.principalName" />
          </mat-form-field>
        </div>

        <!-- Tagline -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Tagline</mat-label>
            <input matInput type="text" name="tagline" [(ngModel)]="college.tagline" />
          </mat-form-field>
        </div>

        <!-- Accreditation -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Accreditation</mat-label>
            <input matInput type="text" name="accreditation" [(ngModel)]="college.accreditation" />
          </mat-form-field>
        </div>

        <!-- University Name -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>University Name</mat-label>
            <input matInput type="text" name="universityName" [(ngModel)]="college.universityName" />
          </mat-form-field>
        </div>

        <!-- Established Year -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Established Year</mat-label>
            <input matInput type="number" name="establishedYear" [(ngModel)]="college.establishedYear" />
          </mat-form-field>
        </div>

        <!-- Total Students -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Total Students</mat-label>
            <input matInput type="number" name="totalStudents" [(ngModel)]="college.totalStudents" />
          </mat-form-field>
        </div>

        <!-- College Type -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>College Type</mat-label>
            <mat-select name="collegeType" [(ngModel)]="college.collegeType">
              <mat-option value="Public">Public</mat-option>
              <mat-option value="Private">Private</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <!-- Website URL -->
        <div class="col-md-6 col-sm-6 mt-2">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Website URL</mat-label>
            <input matInput type="url" name="websiteUrl" [(ngModel)]="college.websiteUrl" />
          </mat-form-field>
        </div>
      </div>
      <!-- College Ranking -->
      <div class="col-md-6 col-sm-6 mt-2">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>College Ranking</mat-label>
          <input matInput type="text" name="collegeRanking" [(ngModel)]="college.collegeRanking" />
        </mat-form-field>
      </div>

      <!-- Hostel Availability -->
      <div class="col-md-6 col-sm-6 mt-2">
        <mat-checkbox name="hostelAvailable" [(ngModel)]="college.hostelAvailable">Hostel Available</mat-checkbox>
      </div>

      <div class="card shadow-lg p-2">
        <h3 class="title">
          <i class="fas fa-book-open"></i> Courses Offered
        </h3>

        <div *ngFor="let course of college.degree; let i = index" class="row course-form">
          <!-- Course Name -->
          <div class="col-md-6 col-sm-12">
            <label for="degreeName-{{i}}">
              <i class="fas fa-file-signature"></i> Course Name:
            </label>
            <input type="text" id="degreeName-{{i}}" [(ngModel)]="course.degreeName" name="degreeName-{{i}}"
              class="form-control" required>
          </div>

          <!-- Course Type -->
          <div class="col-md-5 col-sm-12">
            <label for="degreeType-{{i}}">
              <i class="fas fa-list-alt"></i> Course Type:
            </label>
            <select id="degreeType-{{i}}" [(ngModel)]="course.degreeType" name="degreeType-{{i}}" class="form-control"
              required>
              <option *ngFor="let type of degreeTypes" [value]="type">{{ type }}</option>
            </select>
          </div>

          <!-- Remove Button -->
          <div class="col-md-1 col-sm-12 d-flex align-items-end">
            <button type="button" class="btn btn-danger w-100" (click)="removeCourse(i)"
              *ngIf="college.degree.length > 1">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </div>

        <div class="row mt-3">
          <div class="col-12 text-center">
            <button type="button" class="btn btn-primary" (click)="addCourse()">
              <i class="fas fa-plus"></i> Add More Course
            </button>
          </div>
        </div>
      </div>

      <!-- Add Course Button -->





      <div mat-dialog-actions align="end">
        <button mat-raised-button color="warn" class="m-2" (click)="closeDialog()">Cancel</button>
        <button mat-raised-button color="accent" class="m-2" (click)="resetForm()">Reset</button>
        <button mat-raised-button color="primary" class="m-2" [disabled]="collegeForm.invalid"
          (click)="saveCollege()">Save</button>
      </div>
    </form>
  </div>
</div>